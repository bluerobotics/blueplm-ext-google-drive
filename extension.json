{
  "$schema": "https://blueplm.io/schemas/extension-v1.schema.json",
  "id": "blueplm.google-drive",
  "name": "Google Drive",
  "version": "0.1.0",
  "publisher": "blueplm",
  "description": "Sync files with Google Drive for backup and collaboration. Browse, edit, and manage your Google Drive files directly within BluePLM.",
  "icon": "icon.png",
  "repository": "https://github.com/bluerobotics/blueplm-ext-google-drive",
  "license": "MIT",
  "keywords": ["google", "drive", "sync", "backup", "cloud", "storage"],
  "categories": ["sync", "cloud-storage"],
  "changelog": "## 0.1.0\n- Initial release\n- OAuth 2.0 authentication with Google\n- File browser panel with grid and list views\n- Bidirectional file synchronization\n- Configurable sync interval and direction\n- File exclusion patterns with glob support",
  "category": "sandboxed",
  "engines": {
    "blueplm": "^3.0.0"
  },
  "main": "client/index.js",
  "serverMain": "server/index.js",
  "activationEvents": [
    "onExtensionEnabled",
    "onNavigate:settings/extensions/google-drive",
    "onCommand:google-drive.sync"
  ],
  "contributes": {
    "views": [
      {
        "id": "google-drive-panel",
        "name": "Google Drive",
        "icon": "hard-drive",
        "location": "panel",
        "component": "client/components/GoogleDrivePanel.js"
      }
    ],
    "commands": [
      {
        "id": "google-drive.sync",
        "title": "Sync with Google Drive",
        "icon": "refresh-cw",
        "category": "Google Drive"
      },
      {
        "id": "google-drive.connect",
        "title": "Connect Google Drive",
        "icon": "log-in",
        "category": "Google Drive"
      },
      {
        "id": "google-drive.disconnect",
        "title": "Disconnect Google Drive",
        "icon": "log-out",
        "category": "Google Drive"
      }
    ],
    "settings": [
      {
        "id": "google-drive-settings",
        "name": "Google Drive",
        "description": "Configure Google Drive integration and sync settings",
        "icon": "hard-drive",
        "component": "client/components/GoogleDriveSettings.js",
        "category": "extensions"
      }
    ],
    "apiRoutes": [
      {
        "method": "POST",
        "path": "connect",
        "handler": "server/connect.js"
      },
      {
        "method": "GET",
        "path": "oauth-callback",
        "handler": "server/oauth-callback.js",
        "public": true
      },
      {
        "method": "POST",
        "path": "sync",
        "handler": "server/sync.js"
      },
      {
        "method": "GET",
        "path": "status",
        "handler": "server/status.js"
      },
      {
        "method": "POST",
        "path": "disconnect",
        "handler": "server/disconnect.js"
      }
    ],
    "configuration": {
      "title": "Google Drive",
      "properties": {
        "syncInterval": {
          "type": "number",
          "default": 300,
          "minimum": 60,
          "maximum": 3600,
          "description": "Automatic sync interval in seconds (60-3600)"
        },
        "syncOnFileChange": {
          "type": "boolean",
          "default": true,
          "description": "Automatically sync when files are changed locally"
        },
        "excludePatterns": {
          "type": "array",
          "default": [],
          "description": "File patterns to exclude from sync (e.g., '*.tmp', '.git/**')"
        },
        "syncDirection": {
          "type": "string",
          "default": "bidirectional",
          "enum": ["bidirectional", "upload-only", "download-only"],
          "enumDescriptions": [
            "Sync changes in both directions",
            "Only upload local changes to Google Drive",
            "Only download changes from Google Drive"
          ],
          "description": "Direction of file synchronization"
        }
      }
    }
  },
  "permissions": {
    "client": [
      "ui:toast",
      "ui:dialog",
      "ui:status",
      "ui:progress",
      "storage:local",
      "network:orgApi",
      "commands:register",
      "workspace:files"
    ],
    "server": [
      "storage:database",
      "secrets:read",
      "secrets:write",
      "http:domain:googleapis.com",
      "http:domain:accounts.google.com",
      "http:domain:oauth2.googleapis.com"
    ]
  }
}
